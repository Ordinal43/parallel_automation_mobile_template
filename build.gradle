plugins {
    id 'java'
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
}

repositories {
    mavenCentral()
}

dependencies {
    /** courgette-jvm already includes:
     - cucumber-core
     - cucumber-java
     - cucumber-java8
     - cucumber-junit
     - cucumber-testng
     */
    testImplementation 'io.github.prashant-ramcharan:courgette-jvm:6.15.0'
    testImplementation 'io.appium:java-client:9.3.0'
    testImplementation 'io.github.cdimascio:dotenv-java:3.0.0'
    testImplementation platform('io.qameta.allure:allure-bom:2.28.1')
    testImplementation 'io.qameta.allure:allure-cucumber7-jvm'
    testImplementation 'io.qameta.allure:allure-junit-platform'
}

tasks {
    clean {
        delete "${rootDir}/build"
    }
}

tasks.register('runTest', Test) {
    group = "Automation"
    description = "Run automation in parallel"
    dependsOn clean, assemble, testClasses
    include '**/utils/runners/CourgetteRunner.class'
    systemProperties = System.getProperties() as Map<String, ?>
}
